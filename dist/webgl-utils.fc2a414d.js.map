{"version":3,"sources":["src/common/webgl-utils.js"],"names":["WebGLUtils","makeFailHTML","msg","GET_A_WEBGL_BROWSER","OTHER_PROBLEM","setupWebGL","canvas","opt_attribs","showLink","str","container","parentNode","innerHTML","window","WebGLRenderingContext","context","create3DContext","names","ii","length","getContext","e","console","log","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","element","setTimeout"],"mappings":";;;;;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BO,IAAMA,UAAU,GAAG,YAAW;AAErC;;;;;;AAMA,MAAIC,YAAY,GAAG,SAAfA,YAAe,CAASC,GAAT,EAAc;AAC/B,WAAO,KACL,wEADK,GAEL,qBAFK,GAGL,4DAHK,GAIL,gBAJK,GAIcA,GAJd,GAIoB,QAJpB,GAKL,QALK,GAML,oBANF;AAOD,GARD;AAUA;;;;;;AAIA,MAAIC,mBAAmB,GAAG,KACxB,wDADwB,GAExB,wEAFF;AAIA;;;;;AAIA,MAAIC,aAAa,GAAG,KAClB,yDADkB,GAElB,sFAFF;AAIA;;;;;;;;;;;AAUA,MAAIC,UAAU,GAAG,SAAbA,UAAa,CAASC,MAAT,EAAiBC,WAAjB,EAA8B;AAC7C,aAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACrB,UAAIC,SAAS,GAAGJ,MAAM,CAACK,UAAvB;;AACA,UAAID,SAAJ,EAAe;AACbA,QAAAA,SAAS,CAACE,SAAV,GAAsBX,YAAY,CAACQ,GAAD,CAAlC;AACD;AACF;;AAAA;;AAED,QAAI,CAACI,MAAM,CAACC,qBAAZ,EAAmC;AACjCN,MAAAA,QAAQ,CAACL,mBAAD,CAAR;AACA,aAAO,IAAP;AACD;;AAED,QAAIY,OAAO,GAAGC,eAAe,CAACV,MAAD,EAASC,WAAT,CAA7B;;AACA,QAAI,CAACQ,OAAL,EAAc;AACZP,MAAAA,QAAQ,CAACJ,aAAD,CAAR;AACD;;AACD,WAAOW,OAAP;AACD,GAlBD;AAoBA;;;;;;;;AAMA,MAAIC,eAAe,GAAG,SAAlBA,eAAkB,CAASV,MAAT,EAAiBC,WAAjB,EAA8B;AAClD,QAAIU,KAAK,GAAG,CAAC,QAAD,EAAW,OAAX,EAAoB,oBAApB,EAA0C,WAA1C,EAAuD,WAAvD,CAAZ;AACA,QAAIF,OAAO,GAAG,IAAd;;AACA,SAAK,IAAIG,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGD,KAAK,CAACE,MAA5B,EAAoC,EAAED,EAAtC,EAA0C;AACxC,UAAI;AACFH,QAAAA,OAAO,GAAGT,MAAM,CAACc,UAAP,CAAkBH,KAAK,CAACC,EAAD,CAAvB,EAA6BX,WAA7B,CAAV;AACD,OAFD,CAEE,OAAMc,CAAN,EAAS,CAAE;;AACb,UAAIN,OAAJ,EAAa;AACXO,QAAAA,OAAO,CAACC,GAAR,CAAYR,OAAZ;AACA;AACD;AACF;;AACD,WAAOA,OAAP;AACD,GAbD;;AAeA,SAAO;AACLC,IAAAA,eAAe,EAAEA,eADZ;AAELX,IAAAA,UAAU,EAAEA;AAFP,GAAP;AAIC,CAzFyB,EAAnB;AA2FP;;;;;;;AAGAQ,MAAM,CAACW,gBAAP,GAA2B,YAAW;AACpC,SAAOX,MAAM,CAACY,qBAAP,IACAZ,MAAM,CAACa,2BADP,IAEAb,MAAM,CAACc,wBAFP,IAGAd,MAAM,CAACe,sBAHP,IAIAf,MAAM,CAACgB,uBAJP,IAKA;AAAS;AAAoCC,EAAAA,QAA7C;AAAuD;AAAyBC,EAAAA,OAAhF,EAAyF;AACvFlB,IAAAA,MAAM,CAACmB,UAAP,CAAkBF,QAAlB,EAA4B,OAAK,EAAjC;AACD,GAPR;AAQD,CATyB,EAA1B","file":"webgl-utils.fc2a414d.js","sourceRoot":"..","sourcesContent":["/*\r\n * Copyright 2010, Google Inc.\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are\r\n * met:\r\n *\r\n *     * Redistributions of source code must retain the above copyright\r\n * notice, this list of conditions and the following disclaimer.\r\n *     * Redistributions in binary form must reproduce the above\r\n * copyright notice, this list of conditions and the following disclaimer\r\n * in the documentation and/or other materials provided with the\r\n * distribution.\r\n *     * Neither the name of Google Inc. nor the names of its\r\n * contributors may be used to endorse or promote products derived from\r\n * this software without specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n\r\n/**\r\n * @fileoverview This file contains functions every webgl program will need\r\n * a version of one way or another.\r\n *\r\n * Instead of setting up a context manually it is recommended to\r\n * use. This will check for success or failure. On failure it\r\n * will attempt to present an approriate message to the user.\r\n *\r\n *       gl = WebGLUtils.setupWebGL(canvas);\r\n *\r\n * For animated WebGL apps use of setTimeout or setInterval are\r\n * discouraged. It is recommended you structure your rendering\r\n * loop like this.\r\n *\r\n *       function render() {\r\n *         window.requestAnimFrame(render, canvas);\r\n *\r\n *         // do rendering\r\n *         ...\r\n *       }\r\n *       render();\r\n *\r\n * This will call your rendering function up to the refresh rate\r\n * of your display but will stop rendering if your app is not\r\n * visible.\r\n */\r\n\r\nexport const WebGLUtils = function() {\r\n\r\n/**\r\n * Creates the HTLM for a failure message\r\n * @param {string} canvasContainerId id of container of th\r\n *        canvas.\r\n * @return {string} The html.\r\n */\r\nvar makeFailHTML = function(msg) {\r\n  return '' +\r\n    '<table style=\"background-color: #8CE; width: 100%; height: 100%;\"><tr>' +\r\n    '<td align=\"center\">' +\r\n    '<div style=\"display: table-cell; vertical-align: middle;\">' +\r\n    '<div style=\"\">' + msg + '</div>' +\r\n    '</div>' +\r\n    '</td></tr></table>';\r\n};\r\n\r\n/**\r\n * Mesasge for getting a webgl browser\r\n * @type {string}\r\n */\r\nvar GET_A_WEBGL_BROWSER = '' +\r\n  'This page requires a browser that supports WebGL.<br/>' +\r\n  '<a href=\"http://get.webgl.org\">Click here to upgrade your browser.</a>';\r\n\r\n/**\r\n * Mesasge for need better hardware\r\n * @type {string}\r\n */\r\nvar OTHER_PROBLEM = '' +\r\n  \"It doesn't appear your computer can support WebGL.<br/>\" +\r\n  '<a href=\"http://get.webgl.org/troubleshooting/\">Click here for more information.</a>';\r\n\r\n/**\r\n * Creates a webgl context. If creation fails it will\r\n * change the contents of the container of the <canvas>\r\n * tag to an error message with the correct links for WebGL.\r\n * @param {Element} canvas. The canvas element to create a\r\n *     context from.\r\n * @param {WebGLContextCreationAttirbutes} opt_attribs Any\r\n *     creation attributes you want to pass in.\r\n * @return {WebGLRenderingContext} The created context.\r\n */\r\nvar setupWebGL = function(canvas, opt_attribs) {\r\n  function showLink(str) {\r\n    var container = canvas.parentNode;\r\n    if (container) {\r\n      container.innerHTML = makeFailHTML(str);\r\n    }\r\n  };\r\n\r\n  if (!window.WebGLRenderingContext) {\r\n    showLink(GET_A_WEBGL_BROWSER);\r\n    return null;\r\n  }\r\n\r\n  var context = create3DContext(canvas, opt_attribs);\r\n  if (!context) {\r\n    showLink(OTHER_PROBLEM);\r\n  }\r\n  return context;\r\n};\r\n\r\n/**\r\n * Creates a webgl context.\r\n * @param {!Canvas} canvas The canvas tag to get context\r\n *     from. If one is not passed in one will be created.\r\n * @return {!WebGLContext} The created context.\r\n */\r\nvar create3DContext = function(canvas, opt_attribs) {\r\n  var names = [\"webgl2\", \"webgl\", \"experimental-webgl\", \"webkit-3d\", \"moz-webgl\"];\r\n  var context = null;\r\n  for (var ii = 0; ii < names.length; ++ii) {\r\n    try {\r\n      context = canvas.getContext(names[ii], opt_attribs);\r\n    } catch(e) {}\r\n    if (context) {\r\n      console.log(context);\r\n      break;\r\n    }\r\n  }\r\n  return context;\r\n}\r\n\r\nreturn {\r\n  create3DContext: create3DContext,\r\n  setupWebGL: setupWebGL\r\n};\r\n}();\r\n\r\n/**\r\n * Provides requestAnimationFrame in a cross browser way.\r\n */\r\nwindow.requestAnimFrame = (function() {\r\n  return window.requestAnimationFrame ||\r\n         window.webkitRequestAnimationFrame ||\r\n         window.mozRequestAnimationFrame ||\r\n         window.oRequestAnimationFrame ||\r\n         window.msRequestAnimationFrame ||\r\n         function(/* function FrameRequestCallback */ callback, /* DOMElement Element */ element) {\r\n           window.setTimeout(callback, 1000/60);\r\n         };\r\n})();\r\n\r\n\r\n"]}